(function(b,d){var a=b.fn.offset,c={};b.fn.offset=function(e){if(!b.isPlainObject(e)){return a.apply(this,arguments)}return this.each(function(f){c.setOffset(this,e,f)})};c.setOffset=function(h,r,k){var q=b(h),l=q.css("position"),f=q.offset(),e=q.css("top"),o=q.css("left"),p=(l==="absolute"||l==="fixed")&&~b.inArray("auto",[e,o]),n={},m={},g,j;l==="static"&&q.css("position","relative");m=p?q.position():m;g=m.top||parseFloat(e)||0;j=m.left||parseFloat(o)||0;r=b.isFunction(r)?r.call(h,k,f):r;r.top!=null&&(n.top=r.top-f.top+g);r.left!=null&&(n.left=r.left-f.left+j);"using" in r?r.using.call(h,n):q.css(n)}})(Zepto);(function(e,c){var g=e.fn.position||function(){if(!this.length){return null}var o=this.offsetParent(),p=this.offset(),n=/^(?:body|html)$/i.test(o[0].nodeName)?{top:0,left:0}:o.offset();n.top+=parseFloat(o.css("border-top-width"))||0;n.left+=parseFloat(o.css("border-left-width"))||0;return{top:p.top-n.top,left:p.left-n.left}},l=Math.round,d=/left|center|right/,h=/top|center|bottom/,a=/([\+\-]\d+%?)/,k=/^\w+/,b=/%$/;function m(p,o,n){return[parseInt(p[0],10)*(b.test(p[0])?o/100:1),parseInt(p[1],10)*(b.test(p[1])?n/100:1)]}function j(n,o){return parseInt(n.css(o),10)||0}function f(o){var n=o[0];return n.nodeType===9?{width:o.width(),height:o.height(),top:0,left:0}:n==window?{width:o.width(),height:o.height(),top:n.pageYOffset,left:n.pageXOffset}:n.preventDefault&&(n=n.touches?n.touches[0]:n)?{width:0,height:0,offset:{top:n.pageY,left:n.pageX}}:o.offset()}function i(p){var n=e(p=(p||window)),o=p==window,q=o?{left:0,top:0}:n.offset();return{element:n,isWindow:o,offset:q,width:q.width||n.width(),height:q.height||n.height(),scrollLeft:o?p.pageXOffset:p.scrollLeft,scrollTop:o?p.pageYOffset:p.scrollTop}}e.fn.position=function(n){if(!n||!n.of){return g.call(this)}n=e.extend({},n);var x,v,t,s,o,u=e(n.of),r,w,q=i(n.within),p={};o=f(u);u[0].preventDefault&&(n.at="left top");v=o.width;t=o.height;s={left:o.left,top:o.top};e.each(["my","at"],function(){var y=(n[this]||"").split(" ");y.length===1&&y[d.test(y[0])?"push":"unshift"]("center");y[0]=d.test(y[0])?y[0]:"center";y[1]=h.test(y[1])?y[1]:"center";p[this]=[a.test(y[0])?RegExp.$1:0,a.test(y[1])?RegExp.$1:0];n[this]=[k.exec(y[0])[0],k.exec(y[1])[0]]});s.left+=(r=n.at[0])==="right"?v:r=="center"?v/2:0;s.top+=(r=n.at[1])==="bottom"?t:r=="center"?t/2:0;x=m(p.at,v,t);s.left+=x[0];s.top+=x[1];return this.each(function(){var z,B=e(this),E=B.offset(),F,D=E.width,A=E.height,C=j(B,"marginLeft"),y=j(B,"marginTop"),J=D+C+j(B,"marginRight"),I=A+y+j(B,"marginBottom"),G=e.extend({},s),H=m(p.my,D,A);G.left-=(F=n.my[0])==="right"?D:F==="center"?D/2:0;G.top-=(F=n.my[1])==="bottom"?A:F==="center"?A/2:0;G.left+=H[0];G.top+=H[1];G.left=l(G.left);G.top=l(G.top);z={marginLeft:C,marginTop:y};e.isFunction(w=n.collision)&&w.call(this,G,{targetWidth:v,targetHeight:t,elemWidth:D,elemHeight:A,collisionPosition:z,collisionWidth:J,collisionHeight:I,offset:[x[0]+H[0],x[1]+H[1]],my:n.my,at:n.at,within:q,elem:B});B.offset(e.extend(G,{using:n.using}))})}})(Zepto);