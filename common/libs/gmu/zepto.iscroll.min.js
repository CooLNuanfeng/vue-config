/*!
 * iScroll v4.2.2 ~ Copyright (c) 2012 Matteo Spinelli, http://cubiq.org
 * Released under MIT license, http://cubiq.org/license
 */
(function (n, t) { function u(n) { return e === "" ? n : (n = n.charAt(0).toUpperCase() + n.substr(1), e + n) } var i = Math, f = [], l = t.createElement("div").style, e = function () { for (var t = "webkitT,MozT,msT,OT,t".split(","), i, n = 0, r = t.length; n < r; n++) if (i = t[n] + "ransform", i in l) return t[n].substr(0, t[n].length - 1); return !1 }(), d = e ? "-" + e.toLowerCase() + "-" : "", a = u("transform"), g = u("transitionProperty"), y = u("transitionDuration"), nt = u("transformOrigin"), tt = u("transitionTimingFunction"), st = u("transitionDelay"), it = /android/gi.test(navigator.appVersion), rt = /hp-tablet/gi.test(navigator.appVersion), ut = u("perspective") in l, r = "ontouchstart" in n && !rt, ft = !!e, et = u("transition") in l, p = "onorientationchange" in n ? "orientationchange" : "resize", w = r ? "touchstart" : "mousedown", s = r ? "touchmove" : "mousemove", h = r ? "touchend" : "mouseup", c = r ? "touchcancel" : "mouseup", o = function () { if (e === !1) return !1; return { "": "transitionend", webkit: "webkitTransitionEnd", Moz: "transitionend", O: "otransitionend", ms: "MSTransitionEnd" }[e] }(), ot = function () { return n.requestAnimationFrame || n.webkitRequestAnimationFrame || n.mozRequestAnimationFrame || n.oRequestAnimationFrame || n.msRequestAnimationFrame || function (n) { return setTimeout(n, 1) } }(), k = function () { return n.cancelRequestAnimationFrame || n.webkitCancelAnimationFrame || n.webkitCancelRequestAnimationFrame || n.mozCancelRequestAnimationFrame || n.oCancelRequestAnimationFrame || n.msCancelRequestAnimationFrame || clearTimeout }(), b = ut ? " translateZ(0)" : "", v = function (i, r) { var u = this, f; u.wrapper = typeof i == "object" ? i : t.getElementById(i); u.wrapper.style.overflow = "hidden"; u.scroller = u.wrapper.children[0]; u.translateZ = b; u.options = { hScroll: !0, vScroll: !0, x: 0, y: 0, bounce: !0, bounceLock: !1, momentum: !0, lockDirection: !0, useTransform: !0, useTransition: !1, topOffset: 0, checkDOMChanges: !1, handleClick: !0, onRefresh: null, onBeforeScrollStart: function (n) { for (var t = n.target; t.nodeType != 1;) t = t.parentNode; t.tagName != "SELECT" && t.tagName != "INPUT" && t.tagName != "TEXTAREA" && n.preventDefault() }, onScrollStart: null, onBeforeScrollMove: null, onScrollMove: null, onBeforeScrollEnd: null, onScrollEnd: null, onTouchEnd: null, onDestroy: null }; for (f in r) u.options[f] = r[f]; u.x = u.options.x; u.y = u.options.y; u.options.useTransform = ft && u.options.useTransform; u.options.useTransition = et && u.options.useTransition; u.scroller.style[g] = u.options.useTransform ? d + "transform" : "top left"; u.scroller.style[y] = "0"; u.scroller.style[nt] = "0 0"; u.options.useTransition && (u.scroller.style[tt] = "cubic-bezier(0.33,0.66,0.66,1)"); u.options.useTransform ? u.scroller.style[a] = "translate(" + u.x + "px," + u.y + "px)" + b : u.scroller.style.cssText += ";position:absolute;top:" + u.y + "px;left:" + u.x + "px"; u.refresh(); u._bind(p, n); u._bind(w); u.options.checkDOMChanges && (u.checkDOMTime = setInterval(function () { u._checkDOMChanges() }, 500)) }; v.prototype = { enabled: !0, x: 0, y: 0, steps: [], scale: 1, currPageX: 0, currPageY: 0, pagesX: [], pagesY: [], aniTime: null, isStopScrollAction: !1, handleEvent: function (n) { var t = this; switch (n.type) { case w: if (!r && n.button !== 0) return; t._start(n); break; case s: t._move(n); break; case h: case c: t._end(n); break; case p: t._resize(); break; case o: t._transitionEnd(n) } }, _checkDOMChanges: function () { this.moved || this.animating || this.scrollerW == this.scroller.offsetWidth * this.scale && this.scrollerH == this.scroller.offsetHeight * this.scale || this.refresh() }, _resize: function () { var n = this; setTimeout(function () { n.refresh() }, it ? 200 : 0) }, _pos: function (n, t) { n = this.hScroll ? n : 0; t = this.vScroll ? t : 0; this.options.useTransform ? this.scroller.style[a] = "translate(" + n + "px," + t + "px) scale(" + this.scale + ")" + b : (n = i.round(n), t = i.round(t), this.scroller.style.left = n + "px", this.scroller.style.top = t + "px"); this.x = n; this.y = t }, _start: function (t) { var i = this, l = r ? t.touches[0] : t, e, u, f; i.enabled && (i.options.onBeforeScrollStart && i.options.onBeforeScrollStart.call(i, t), i.options.useTransition && i._transitionTime(0), i.moved = !1, i.animating = !1, i.distX = 0, i.distY = 0, i.absDistX = 0, i.absDistY = 0, i.dirX = 0, i.dirY = 0, i.isStopScrollAction = !1, i.options.momentum && (i.options.useTransform ? (e = getComputedStyle(i.scroller, null)[a].replace(/[^0-9\-.,]/g, "").split(","), u = +e[4], f = +e[5]) : (u = +getComputedStyle(i.scroller, null).left.replace(/[^0-9-]/g, ""), f = +getComputedStyle(i.scroller, null).top.replace(/[^0-9-]/g, "")), (u != i.x || f != i.y) && (i.isStopScrollAction = !0, i.options.useTransition ? i._unbind(o) : k(i.aniTime), i.steps = [], i._pos(u, f), i.options.onScrollEnd && i.options.onScrollEnd.call(i))), i.startX = i.x, i.startY = i.y, i.pointX = l.pageX, i.pointY = l.pageY, i.startTime = t.timeStamp || Date.now(), i.options.onScrollStart && i.options.onScrollStart.call(i, t), i._bind(s, n), i._bind(h, n), i._bind(c, n)) }, _move: function (n) { var t = this, s = r ? n.touches[0] : n, o = s.pageX - t.pointX, f = s.pageY - t.pointY, e = t.x + o, u = t.y + f, h = n.timeStamp || Date.now(); (t.options.onBeforeScrollMove && t.options.onBeforeScrollMove.call(t, n), t.pointX = s.pageX, t.pointY = s.pageY, (e > 0 || e < t.maxScrollX) && (e = t.options.bounce ? t.x + o / 2 : e >= 0 || t.maxScrollX >= 0 ? 0 : t.maxScrollX), (u > t.minScrollY || u < t.maxScrollY) && (u = t.options.bounce ? t.y + f / 2 : u >= t.minScrollY || t.maxScrollY >= 0 ? t.minScrollY : t.maxScrollY), t.distX += o, t.distY += f, t.absDistX = i.abs(t.distX), t.absDistY = i.abs(t.distY), t.absDistX < 6 && t.absDistY < 6) || (t.options.lockDirection && (t.absDistX > t.absDistY + 5 ? (u = t.y, f = 0) : t.absDistY > t.absDistX + 5 && (e = t.x, o = 0)), t.moved = !0, t._beforePos ? t._beforePos(u, f) && t._pos(e, u) : t._pos(e, u), t.dirX = o > 0 ? -1 : o < 0 ? 1 : 0, t.dirY = f > 0 ? -1 : f < 0 ? 1 : 0, h - t.startTime > 300 && (t.startTime = h, t.startX = t.x, t.startY = t.y), t.options.onScrollMove && t.options.onScrollMove.call(t, n)) }, _end: function (u) { if (!r || u.touches.length === 0) { var f = this, y = r ? u.changedTouches[0] : u, e, p, o = { dist: 0, time: 0 }, l = { dist: 0, time: 0 }, w = (u.timeStamp || Date.now()) - f.startTime, a = f.x, v = f.y, b; if (f._unbind(s, n), f._unbind(h, n), f._unbind(c, n), f.options.onBeforeScrollEnd && f.options.onBeforeScrollEnd.call(f, u), !f.moved) { r && this.options.handleClick && !f.isStopScrollAction && (f.doubleTapTimer = setTimeout(function () { for (f.doubleTapTimer = null, e = y.target; e.nodeType != 1;) e = e.parentNode; e.tagName != "SELECT" && e.tagName != "INPUT" && e.tagName != "TEXTAREA" && (p = t.createEvent("MouseEvents"), p.initMouseEvent("click", !0, !0, u.view, 1, y.screenX, y.screenY, y.clientX, y.clientY, u.ctrlKey, u.altKey, u.shiftKey, u.metaKey, 0, null), p._fake = !0, e.dispatchEvent(p)) }, 0)); f._resetPos(400); f.options.onTouchEnd && f.options.onTouchEnd.call(f, u); return } if (w < 300 && f.options.momentum && (o = a ? f._momentum(a - f.startX, w, -f.x, f.scrollerW - f.wrapperW + f.x, f.options.bounce ? f.wrapperW : 0) : o, l = v ? f._momentum(v - f.startY, w, -f.y, f.maxScrollY < 0 ? f.scrollerH - f.wrapperH + f.y - f.minScrollY : 0, f.options.bounce ? f.wrapperH : 0) : l, a = f.x + o.dist, v = f.y + l.dist, (f.x > 0 && a > 0 || f.x < f.maxScrollX && a < f.maxScrollX) && (o = { dist: 0, time: 0 }), (f.y > f.minScrollY && v > f.minScrollY || f.y < f.maxScrollY && v < f.maxScrollY) && (l = { dist: 0, time: 0 })), o.dist || l.dist) { b = i.max(i.max(o.time, l.time), 10); f.scrollTo(i.round(a), i.round(v), b); f.options.onTouchEnd && f.options.onTouchEnd.call(f, u); return } f._resetPos(200); f.options.onTouchEnd && f.options.onTouchEnd.call(f, u) } }, _resetPos: function (n) { var t = this, i = t.x >= 0 ? 0 : t.x < t.maxScrollX ? t.maxScrollX : t.x, r = t.y >= t.minScrollY || t.maxScrollY > 0 ? t.minScrollY : t.y < t.maxScrollY ? t.maxScrollY : t.y; if (i == t.x && r == t.y) { t.moved && (t.moved = !1, t.options.onScrollEnd && t.options.onScrollEnd.call(t), t._afterPos && t._afterPos()); return } t.scrollTo(i, r, n || 0) }, _transitionEnd: function (n) { var t = this; n.target == t.scroller && (t._unbind(o), t._startAni()) }, _startAni: function () { var n = this, r = n.x, u = n.y, s = Date.now(), t, f, e; if (!n.animating) { if (!n.steps.length) { n._resetPos(400); return } if (t = n.steps.shift(), t.x == r && t.y == u && (t.time = 0), n.animating = !0, n.moved = !0, n.options.useTransition) { n._transitionTime(t.time); n._pos(t.x, t.y); n.animating = !1; t.time ? n._bind(o) : n._resetPos(0); return } e = function () { var o = Date.now(), h, c; if (o >= s + t.time) { n._pos(t.x, t.y); n.animating = !1; n.options.onAnimationEnd && n.options.onAnimationEnd.call(n); n._startAni(); return } o = (o - s) / t.time - 1; f = i.sqrt(1 - o * o); h = (t.x - r) * f + r; c = (t.y - u) * f + u; n._pos(h, c); n.animating && (n.aniTime = ot(e)) }; e() } }, _transitionTime: function (n) { n += "ms"; this.scroller.style[y] = n }, _momentum: function (n, t, r, u, f) { var s = this.options.deceleration || .0006, o = i.abs(n) * (this.options.speedScale || 1) / t, e = o * o / (2 * s), c = 0, h = 0; return n > 0 && e > r ? (h = f / (6 / (e / o * s)), r = r + h, o = o * r / e, e = r) : n < 0 && e > u && (h = f / (6 / (e / o * s)), u = u + h, o = o * u / e, e = u), e = e * (n < 0 ? -1 : 1), c = o / s, { dist: e, time: i.round(c) } }, _offset: function (n) { for (var t = -n.offsetLeft, i = -n.offsetTop; n = n.offsetParent;) t -= n.offsetLeft, i -= n.offsetTop; return n != this.wrapper && (t *= this.scale, i *= this.scale), { left: t, top: i } }, _bind: function (n, t, i) { f.concat([t || this.scroller, n, this]); (t || this.scroller).addEventListener(n, this, !!i) }, _unbind: function (n, t, i) { (t || this.scroller).removeEventListener(n, this, !!i) }, destroy: function () { var i = this, r, e, u; for (i.scroller.style[a] = "", i._unbind(p, n), i._unbind(w), i._unbind(s, n), i._unbind(h, n), i._unbind(c, n), i.options.useTransition && i._unbind(o), i.options.checkDOMChanges && clearInterval(i.checkDOMTime), i.options.onDestroy && i.options.onDestroy.call(i), r = 0, e = f.length; r < e;) f[r].removeEventListener(f[r + 1], f[r + 2]), f[r] = null, r = r + 3; f = []; u = t.createElement("div"); u.appendChild(this.wrapper); u.innerHTML = ""; i.wrapper = i.scroller = u = null }, refresh: function () { var n = this, t; n.wrapperW = n.wrapper.clientWidth || 1; n.wrapperH = n.wrapper.clientHeight || 1; n.minScrollY = -n.options.topOffset || 0; n.scrollerW = i.round(n.scroller.offsetWidth * n.scale); n.scrollerH = i.round((n.scroller.offsetHeight + n.minScrollY) * n.scale); n.maxScrollX = n.wrapperW - n.scrollerW; n.maxScrollY = n.wrapperH - n.scrollerH + n.minScrollY; n.dirX = 0; n.dirY = 0; n.options.onRefresh && n.options.onRefresh.call(n); n.hScroll = n.options.hScroll && n.maxScrollX < 0; n.vScroll = n.options.vScroll && (!n.options.bounceLock && !n.hScroll || n.scrollerH > n.wrapperH); t = n._offset(n.wrapper); n.wrapperOffsetLeft = -t.left; n.wrapperOffsetTop = -t.top; n.scroller.style[y] = "0"; n._resetPos(400) }, scrollTo: function (n, t, i, r) { var e = this, u = n, f, o; for (e.stop(), u.length || (u = [{ x: n, y: t, time: i, relative: r }]), f = 0, o = u.length; f < o; f++) u[f].relative && (u[f].x = e.x - u[f].x, u[f].y = e.y - u[f].y), e.steps.push({ x: u[f].x, y: u[f].y, time: u[f].time || 0 }); e._startAni() }, scrollToElement: function (n, t) { var u = this, r; (n = n.nodeType ? n : u.scroller.querySelector(n), n) && (r = u._offset(n), r.left += u.wrapperOffsetLeft, r.top += u.wrapperOffsetTop, r.left = r.left > 0 ? 0 : r.left < u.maxScrollX ? u.maxScrollX : r.left, r.top = r.top > u.minScrollY ? u.minScrollY : r.top < u.maxScrollY ? u.maxScrollY : r.top, t = t === undefined ? i.max(i.abs(r.left) * 2, i.abs(r.top) * 2) : t, u.scrollTo(r.left, r.top, t)) }, scrollToPage: function (n, t, i) { var r = this, u, f; i = i === undefined ? 400 : i; r.options.onScrollStart && r.options.onScrollStart.call(r); u = -r.wrapperW * n; f = -r.wrapperH * t; u < r.maxScrollX && (u = r.maxScrollX); f < r.maxScrollY && (f = r.maxScrollY); r.scrollTo(u, f, i) }, disable: function () { this.stop(); this._resetPos(0); this.enabled = !1; this._unbind(s, n); this._unbind(h, n); this._unbind(c, n) }, enable: function () { this.enabled = !0 }, stop: function () { this.options.useTransition ? this._unbind(o) : k(this.aniTime); this.steps = []; this.moved = !1; this.animating = !1 }, isReady: function () { return !this.moved && !this.animating } }; l = null; typeof exports != "undefined" ? exports.iScroll = v : n.iScroll = v, function (t) { function r(n, t) { var r = "iscroll" + f++; return n.data("_iscroll_", r), i[r] = new u(n[0], t) } if (t) { var u = v, f = 0, i = {}; n.iScroll = function (n, i) { return r(t(typeof n == "string" ? "#" + n : n), i) }; t.fn.iScroll = function (n) { var u = []; return this.each(function (f, e) { var o, s, h; typeof n == "string" ? (o = i[t(e).data("_iscroll_")], o && (s = o[n]) && (h = t.isFunction(s) ? s.apply(o, Array.prototype.slice.call(arguments, 1)) : s, h !== o && h !== undefined && u.push(h))) : t(e).data("_iscroll_") || r(t(e), n) }), u.length ? u : this } } }(n.Zepto || null) })(window, document)