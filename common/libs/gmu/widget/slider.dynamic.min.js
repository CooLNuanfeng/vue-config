(function(b){var a=function(c){return'<div class="ui-slider-item"><a href="'+c.href+'"><img lazyload="'+c.pic+'"/></a>'+(c.title?"<p>"+c.title+"</p>":"")+"</div>"};b.ui.slider.register(function(){return{pluginName:"dynamic",_setup:function(){throw new Error("This plugin does not support setup mode")},_create:function(){var d=this._data,e,c=d.content;d.autoPlay=false;d.loop=false;d.viewNum=1;d.showDot=false;e=b('<div class="ui-slider-group"></div>');this._renderItems(c,d.index||0,e,d);(this.root()||this.root(b("<div></div>"))).addClass("ui-slider").appendTo(d.container||(this.root().parent().length?"":document.body)).html(b('<div class="ui-slider-wheel"></div>').append(e));this._addDots()},_renderItems:function(k,j,l,g){var h,e,d,m,f,c=g.itemRender||a;h=k.slice(j,j+3);this._active=e=k[j];d=3-h.length;d&&(h=k.slice(j-d,j).concat(h));g.index=b.inArray(e,this._pool=h);this._index=j;for(f=0;f<3&&(m=h[f]);f++){l.append(c(m))}this._loadImages(l.find("img[lazyload]"))},_init:function(){this._initOrg();this._adjustPos();this.trigger("slide",[this._index||0,this._active])},_transitionEnd:function(){this._transitionEndOrg();this._adjustPos()},_adjustPos:function(){var g=this._data,l=this.root(),j=g.content,e=j.length,o,f,d=g.width,n=l.find(".ui-slider-group"),c=g.itemRender||a,i,k,m,h;i=b.inArray(this._active,j);k=g.index;m=k-1;h=i+m;if(m&&h<e&&h>=0){o=j[h];f=b(c(o));this._loadImages(f.find("img[lazyload]"));n.children().eq(1-m).remove();n[m<0?"prepend":"append"](f);this._pool.splice(1-m,1);this._pool[m<0?"unshift":"push"](o);g.index-=m;g.items=n.children().each(function(p){this.style.cssText+="width:"+d+"px;position:absolute;-webkit-transform:translate3d("+p*d+"px,0,0);z-index:"+(900-p)});g.wheel.style.cssText+="-webkit-transition:0ms;-webkit-transform:translate3d(-"+g.index*d+"px,0,0);"}if(i===0||i===e-1){this.trigger("edge",[i===0,this._active])}return this},_move:function(c){var d=this._data,e;d.index=c;this._active=this._pool[c];this._index=e=b.inArray(this._active,d.content);this.trigger("slide",[e,this._active]);d.wheel.style.cssText+="-webkit-transition:"+(d.animationTime||"0")+"ms;-webkit-transform:translate3d(-"+d.index*d.width+"px,0,0);"},_touchStart:function(h){var d=this._data,g,f,c;this._touchStartOrg.apply(this,arguments);g=-d.index*d.width;c=getComputedStyle(d.wheel,null)["webkitTransform"].replace(/[^0-9\-.,]/g,"").split(",");f=+c[4];if(g!==f){this._adjustPos()}},_loadImages:function(d){var c=this._data;c.imgZoom&&d.on("load",function(){var j=this.height,f=this.width,i=c.width,e=c.height,k=Math.min(j,e),g=Math.min(f,i);b(this).off("load",arguments.callee);this.style.cssText+=j/e>f/i?("height:"+k+"px;width:"+k/j*f+"px;"):("height:"+g/f*j+"px;width:"+g+"px")});d.each(function(){this.src=this.getAttribute("lazyload");this.removeAttribute("lazyload")})},update:function(e){var f=this._data,h,d=f.width,g,c=b.inArray(g=this._active,e);~c||(c=f._direction>0?0:e.length-1);h=this.root().find(".ui-slider-group").empty();this._renderItems(f.content=e,c,h,f);f.items=h.children().each(function(j){this.style.cssText+="width:"+d+"px;position:absolute;-webkit-transform:translate3d("+j*d+"px,0,0);z-index:"+(900-j)});this._adjustPos();g!==this._active&&this.trigger("slide",[c||0,this._active])}}})})(Zepto);