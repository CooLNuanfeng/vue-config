(function(b,c){var a='<% for (var i=0, len=left.length; i<len; i++) { %><a href="<%=left[i].url%>" class="ui-navigator-fix ui-navigator-fixleft"><%=left[i].text%></a><% } %><ul class="ui-navigator-list"><% for (var i=0, len=mid.length; i<len; i++) { %><li><a href="<%=mid[i].url%>"><%=mid[i].text%></a></li><% } %></ul><% for (var i=0, len=right.length; i<len; i++) { %><a href="<%=right[i].url%>" class="ui-navigator-fix ui-navigator-fixright"><%=right[i].text%></a><% } %>';b.ui.define("navigator",{_data:{container:"",content:[],defTab:0,beforetabselect:null,tabselect:null},_create:function(){var h=this,i=h._data,g=h.root(),d=b(i.container||document.body).get(0),e={left:[],mid:[],right:[]},f;b.each(i.content,function(){e[this.pos?this.pos:"mid"].push(this)});f=b.parseTpl(a,e);if(g){g.append(f);(!g.parent().length||d!==document.body)&&g.appendTo(d)}else{h.root(b("<div></div>").append(f)).appendTo(d)}},_setup:function(e){var g=this,h=g._data,f=h.defTab,d=g.root();if(!e){d.children("a").addClass("ui-navigator-fix");d.children("ul").addClass("ui-navigator-list")}d.find("a").each(function(j){f===0?b(this).hasClass("cur")&&(h.defTab=j):b(this).removeClass("cur")})},_init:function(){var f=this,g=f._data,d=f.root(),e=g.content,h=d.find("a");h.each(function(j){this.index=j;e.length&&e[j].attr&&b(this).attr(e[j].attr)});g._$tabList=h;g._lastIndex=-1;d.addClass("ui-navigator").on("click",b.proxy(f._switchTabHandler,f));f.switchTo(g.defTab,true)},_switchTabHandler:function(g){var d=this,f=g.target;b(f).closest("a").get(0)&&d.switchTo(f.index,false,g);return d},switchTo:function(g,f,k){var h=this,i=h._data,l=i._lastIndex,j=i._$tabList,d=b.Event("beforetabselect");h.trigger(d,[j[g]]);if(d.defaultPrevented){k&&k.preventDefault();return h}if(l==g){k&&k.preventDefault();return h}l>=0&&j.eq(l).removeClass("cur");j.eq(g).addClass("cur");i._lastIndex=g;return h.trigger("tabselect",[j.get(g),g])},getCurTab:function(){var d=this,e=d._data,f=e._lastIndex;return{index:f,info:e._$tabList[f]}}})})(Zepto);