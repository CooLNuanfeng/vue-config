(function(e,t){function s(t){var n="&"+e.location.search.substr(1)+"&",r=new RegExp("&"+t+"=([^&]*)&"),i=n.match(r);return i?i[1]:""}function o(e,t,n){var r=new XMLHttpRequest;r.onreadystatechange=function(){if(r.readyState==4){var e=r.status;if(e>=200&&e<300||e==304){t.call(null,r.responseText)}else{var i=e?"Error:"+e:"Abort";u(n)=="function"?n(e,i):alert(i)}}};r.open("get",e,true);r.setRequestHeader("Content-Type","application/x-www-form-urlencoded");r.send(null)}function u(e){var t=typeof e;return(t=="object"?Object.prototype.toString.call(e).slice(8,-1):t).toLowerCase()}function a(e,t){if(u(e)=="array"){for(var n=0,r=e.length;n<r;n++){t.apply(null,[n,e[n]])}}else{for(var i in e){if(e.hasOwnProperty(i)){t.apply(null,[i,e[i]])}}}}function f(e,t){for(var n=0,r=t.length;n<r;n++){if(t[n]===e){return n}}return-1}function l(t,n,r){r=u(r)=="string"?r:_appName;if(u(n)=="undefined"){var i=_storage.getItem(r+t);if(i===null){return i}try{return JSON.parse(i)}catch(s){return i}}if(r==_appName){var o=l("CacheKey")||[];o.push(t);o=g(o);_storage.setItem(_appName+"CacheKey",JSON.stringify(o))}if(u(n)!="string"){n=JSON.stringify(n)}try{_storage.setItem(r+t,n)}catch(s){var a=h();if(a!==false){l(t,n)}else{var f=l("Core")||[],d=p();d=d.concat(f);if(d.length<1){c(_appName);e.location.reload(false);return}var v=d.shift(),m=_appName+v;_storage.removeItem(m);_storage.removeItem(m+".Version");p(d);l(t,n)}}}function c(e){var t=l("CacheKey",undefined,e)||[];a(t,function(t,n){_storage.removeItem(e+n)});_storage.removeItem(e+"CacheKey")}function h(){var e=l("App.Queue",undefined,"")||[];e=m(_appName,e);if(e.length>0){var t=e.shift();c(t);l("App.Queue",e,"");return t}return false}function p(e){return u(e)!="undefined"?l("Source",e):l("Source")||[]}function d(e){var t={};a(["js","css","page"],function(n,r){e[r]&&a(e[r],function(e,n){var i=r+"_"+e;n.__name__=e;n.__type__=r;n.v=n.v||"";t[i]=n});e[r]=null;delete e[r]});e.__source__=t;return e}function v(e,t){a(e,function(n,r){e[n]=t+r});return e}function m(e,t){var n=f(e,t);if(n!=-1){t.splice(n,1)}return t}function g(e){var t={},n=[];a(e,function(e,r){if(!t[r]){n.push(r);t[r]=1}});return n}function y(e,t,n){e=v(e,"js_");t=v(t,"css_");e=g(e);t=g(t);return t.concat(e)}function b(e,t){if(t.url){return t.url}var n=e[t.__type__+"Config"]||{};return n.path+t.__name__.replace(/\./g,"/")+n.suffix}function w(e){var t=_cache["Config"],n=t.__source__,r=l("Core")||[],i=p(),s=e.length,u=0;a(e,function(e,a){var c=n[a],h=b(t,c),d=h+"?_="+(c.v==-1?+(new Date):c.v);o(d,function(e,t){return function(n){if(f(e,r)==-1&&t.v!=-1){if(f(e,i)!=-1){i=m(e,i)}i.push(e)}if(t.v!=-1){l(e,n);l(e+".Version",t.v)}_cache[e]=n;u++;if(u==s){p(i);x()}}}(a,c))})}function E(e){var t="page_"+s("v"),n=e.__source__,t=n[t]?t:"page_index",r=n[t]||{},i=e.jsCore||[],o=e.cssCore||[],u=i.concat(r.js||[]),f=o.concat(r.css||[]);_fireQueue=y(u,f,e);_fireQueue.push(t);var c=[];c[0]=v(o,"css_").reverse();c[1]=v(i,"js_").reverse();c=c[0].concat(c[1]);l("Core",c);var h=[];a(_fireQueue,function(e,t){_cache[t]=l(t);if(n[t].v==-1||_cache[t]===null||l(t+".Version")!=n[t].v){h.push(t)}});if(h.length>0){w(h)}else{x()}}function x(){_renderReady=true;if(_onload){T()}}function T(){var e=_cache["Config"],n=e.__source__||{},r={};a(_fireQueue,function(e,t){var i=n[t].__type__;if(!r[i]){r[i]=[]}r[i].push(_cache[t]||"")});var i=r.page.join("");var s='<style type="text/css">'+r.css.join("\n")+"</style>\n",o=i.indexOf("</head>"),u=i.match(/<style(?:\s.*)?>/),f=u?Math.min(i.indexOf(u[0]),o):o;i=i.substr(0,f)+s+i.substr(f);t.open("text/html","replace");t.write(i);t.close();var l=t.getElementsByTagName("head")[0];r.js=r.js.join(";");S(l,r.js);r=i=js=s=null;_onload=_renderReady=false}function N(){var e=false;if(!!n){var t=_appName+"CacheEnabled";n.setItem(t,1);e=n.getItem(t)==1;e&&n.removeItem(t)}_storage=e?n:r;var s=l("App.Queue",undefined,"")||[];if(f(_appName,s)!=-1){s=m(_appName,s)}s.push(_appName);l("App.Queue",s,"");var u=l("Config"),a=l("Config.Expire"),c=false;_cache["Config"]=u;if(!navigator.onLine){x();return}if(u&&a){var h=+(new Date);if((h-a.time)/(1e3*60)>a.expire){c=true}}else{c=true}if(c){var p=i.substring(0,i.lastIndexOf("/")+1),v=p+"app.json";o(v+"?_="+ +(new Date),function(e){e=d(JSON.parse(e));l("Config",e);l("Config.Expire",{time:+(new Date),expire:e.expire});_cache["Config"]=e;E(e)})}else{E(u)}}var n=e.localStorage,r=e.sessionStorage,i=e.location.pathname;_appName=i,_fireQueue=[],_onload=false,_renderReady=false,_cache={},_storage=null;var S=function(e,n){var r=t.createElement("script");r.type="text/javascript";r.text=n;e.appendChild(r)};e.addEventListener("load",function(){_onload=true;if(_renderReady){T()}});N()})(window,document,undefined)