(function(a){a.fn.easyselect=function(f){var h={maxHeight:300,onChange:a.noop,onShow:a.noop,onClose:a.noop};var g=a.extend(h,f);var i=(typeof document.body.style.maxHeight==="undefined");function c(l){var k=l.prev(),j=l.parent();j.removeClass("ui-select-selected");l.hide();g.onClose()}function e(n){var l=n.prev(),j=n.find("li"),k=n.parent(),m=k.find(".ui-select-title").data("selected");a(".ui-select-selected .ui-select-options").hide();k.addClass("ui-select-selected");j.removeClass("selected").eq(m).addClass("selected");n.show();if(i&&!n.data("hasSetMaxHeight")&&n.height()>g.maxHeight){n.height(g.maxHeight).data("hasSetMaxHeight",1)}g.onShow()}function b(q){var l=a(q),p,m,t,r,u=l.prop("disabled"),k=l.find("option"),o={id:q.id?q.id:"",name:q.name?q.name:"",tabindex:q.tabindex?q.tabindex:""};var s={};s.getTarget=l;p=a("<div>",{id:(o.id?"ui-select-"+o.id:"ui-select-"+o.name),"class":"ui-select "+(o.id?"ui-select-"+o.id:"ui-select-"+o.name)+(u?" ui-select-disabled":""),tabindex:o.tabindex});m=a("<div>",{"class":"ui-select-title"});m.click(function(w){w.stopPropagation();if(!p.hasClass("ui-select-disabled")){if(r.is(":visible")){c(r)}else{e(r)}}});var j=k.filter(":selected");if(j.length>0){m.text(j.text()).data("selected",j.index())}else{m.text(k.eq(0).text()).data("selected",0)}t=a("<em>",{"class":"ui-select-arrow",html:"<i></i>"});t.click(function(w){w.stopPropagation();if(!p.hasClass("ui-select-disabled")){if(r.is(":visible")){c(r)}else{e(r)}}});r=a("<ul>",{"class":"ui-select-options clearfix"});r.on("mouseenter",".J-esTrigger",function(){a(this).addClass("selected").siblings().removeClass("selected")}).on("click",".J-esTrigger",function(x){x.stopPropagation();var w=a(this),z=w.text(),y=w.data("value");m.text(z).data("selected",w.data("index"));r.children().removeClass("selected");w.addClass("selected");l.val(y);c(r);g.onChange(s)}).on("click",".J-esTrigger-disabled",function(w){w.stopPropagation();r.show()});var v=[];k.each(function(x){var z=a(this),w,y={value:this.value,text:this.text,selected:this.selected,disabled:this.disabled};w=y.selected?"selected ":"";w+=y.disabled?"disabled":"";w=a.trim(w);if(y.disabled){v.push('<li class="',w,' ui-option ui-option-disabled J-esTrigger-disabled" data-value="',y.value,'" data-index="',x,'">',y.text)}else{v.push('<li class="',w,' ui-option J-esTrigger" data-value="',y.value,'" data-index="',x,'">',y.text)}v.push("</li>")});var n=v.join("");r.append(n);p.append(m,t,r);l.hide().after(p);l.on("change",function(){var x=l.val(),w=r.find('[data-value="'+x+'"]');m.text(k.filter(":selected").text());r.children().removeClass("selected");w.addClass("selected")});a(document).on("click",function(){if(r.is(":visible")){c(r)}})}function d(l){var k=this,j=l.next(".ui-select");a.extend(k,{disable:function(){j.addClass("ui-select-disabled")},enable:function(){j.removeClass("ui-select-disabled")},destroy:function(){l.removeData("easyselect");j.remove()}})}return this.each(function(){if(navigator.userAgent.match(/iPad|iPhone|Android|IEMobile|BlackBerry/i)){$(this).show();return false}var l=a(this),k=l.data("easyselect");if(!k){b(this);var j=new d(l);l.data("easyselect",j)}})}})(jQuery);