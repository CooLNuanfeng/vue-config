(function(n,t,i,r){var u=n(t);n.fn.lazyload=function(i){function o(){var t=0;e.each(function(){var i=n(this);if((!f.skip_invisible||i.css("display")!=="none")&&!n.abovethetop(this,f)&&!n.leftofbegin(this,f))if(n.belowthefold(this,f)||n.rightoffold(this,f)){if(++t>f.failure_limit)return!1}else i.trigger("appear"),t=0})}var e=this,s,f={threshold:$(window).height()*3,failure_limit:0,event:"scroll",effect:"show",container:t,data_attribute:"original",skip_invisible:!0,appear:null,load:null,effectClass:""};if(i&&(r!==i.failurelimit&&(i.failure_limit=i.failurelimit,delete i.failurelimit),r!==i.effectspeed&&(i.effect_speed=i.effectspeed,delete i.effectspeed),n.extend(f,i)),s=f.container===r||f.container===t?u:n(f.container),0===f.event.indexOf("scroll"))s.on(f.event,function(){return o()});this.each(function(){var i=this,t=n(i);i.loaded=!1;t.one("appear",function(){if(!this.loaded){if(f.appear){var r=e.length;f.appear.call(i,r,f)}n("<img />").on("load",function(){var r,u;t.attr("src",t.data(f.data_attribute));i.loaded=!0;r=n.grep(e,function(n){return!n.loaded});e=n(r);f.load&&(u=e.length,f.load.call(i,u,f));f.effectClass&&t.addClass(f.effectClass)}).attr("src",t.data(f.data_attribute))}});if(0!==f.event.indexOf("scroll"))t.on(f.event,function(){i.loaded||t.trigger("appear")})});u.on("resize",function(){o()});return o(),this};n.belowthefold=function(i,f){var e;return e=f.container===r||f.container===t?u.height()+u[0].scrollY:n(f.container).offset().top+n(f.container).height(),e<=n(i).offset().top-f.threshold};n.rightoffold=function(i,f){var e;return e=f.container===r||f.container===t?u.width()+u[0].scrollX:n(f.container).offset().left+n(f.container).width(),e<=n(i).offset().left-f.threshold};n.abovethetop=function(i,f){var e;return e=f.container===r||f.container===t?u[0].scrollY:n(f.container).offset().top,e>=n(i).offset().top+f.threshold+n(i).height()};n.leftofbegin=function(i,f){var e;return e=f.container===r||f.container===t?u[0].scrollX:n(f.container).offset().left,e>=n(i).offset().left+f.threshold+n(i).width()};n.inviewport=function(t,i){return!n.rightoffold(t,i)&&!n.leftofbegin(t,i)&&!n.belowthefold(t,i)&&!n.abovethetop(t,i)};n.extend(n.fn,{"below-the-fold":function(t){return n.belowthefold(t,{threshold:0})},"above-the-top":function(t){return!n.belowthefold(t,{threshold:0})},"right-of-screen":function(t){return n.rightoffold(t,{threshold:0})},"left-of-screen":function(t){return!n.rightoffold(t,{threshold:0})},"in-viewport":function(t){return n.inviewport(t,{threshold:0})},"above-the-fold":function(t){return!n.belowthefold(t,{threshold:0})},"right-of-fold":function(t){return n.rightoffold(t,{threshold:0})},"left-of-fold":function(t){return!n.rightoffold(t,{threshold:0})}})})($,window,document)