(function(n){n.fn.focusPosition=function(t){return this.length==0?this:n(this).focusSelect(t,t)};n.fn.focusSelect=function(n,t){if(this.length==0)return this;if(input=this[0],input.createTextRange){var i=input.createTextRange();i.collapse(!0);i.moveEnd("character",t);i.moveStart("character",n);i.select()}else input.setSelectionRange&&(input.focus(),input.setSelectionRange(n,t));return this};n.fn.focusEnd=function(){this.focusPosition(this.val().length)};n.fn.numberGap=function(){return this.each(function(){n(this).keyup(function(){var t=n(this).val().replace(/\s/g,"").replace(/(\d{4})(?=\d)/g,"$1 ");n(this).val(t)})})};n.fn.countdownButton=function(t){return t=n.extend({until:10,position:0,text:null,prepend:null,append:null,after:null,notActiveClass:"cd_notactive",completeHanlder:n.noop},t),this.each(function(){function y(n){if(r=="self"){i.val(n);return}(r=="front"||r==0)&&i.val(n+u);r=="end"||r==a?i.val(u+n):i.val(v+n+o)}function p(){if(y(f),f--,f<1){c!=null&&(u=c);i.val(l).attr("disabled",!1);i.removeClass(t.notActiveClass);clearInterval(e);t.completeHanlder();return}}function w(){i.val(l).attr("disabled",!1);i.removeClass(t.notActiveClass);clearInterval(e)}var i=n(this),f=t.until,r=t.position,s=t.prepend,h=t.append,c=t.after,u=t.text||i.val(),l=i.val(),a=u.length,e,v=u.slice(0,r),o=u.slice(r,a);s!=null&&(v+=s);h!=null&&(o=h+o);i.attr("disabled",!0);i.addClass(t.notActiveClass);i.data("retry",w);e=setInterval(function(){p()},1e3)})};n.fn.clipboard=function(t){return t=n.extend({zclip:!0,onComplete:null},t),this.each(function(){var r=n(this),u=r.attr("data-field"),i=u?n(u):r.prev();window.clipboardData?r.click(function(){var n=i.val()||i.text(),r=n.length;window.clipboardData.setData("text",n);i.focusSelect(0,r);t.onComplete()}):r.zclip({path:"//static2.51fanli.net/common/plugins/zclip/ZeroClipboard.swf",copy:function(){return i.val()||i.text()},clickAfter:!1,afterCopy:function(){t.onComplete()}})})}})(jQuery)