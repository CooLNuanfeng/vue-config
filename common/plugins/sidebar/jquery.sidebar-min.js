(function(a){a.fn.sidebar=function(b){b=a.extend({min:1,fadeSpeed:200,position:"bottom",anchorOffset:0,relative:false,relativeWidth:960,backToTop:false,backContainer:"#backToTop",smooth:".smooth",overlay:false,onShow:null},b);return this.each(function(){var i=a(this),o=a.browser,c=a(window),d=a(document),g=a("body, html"),n=b.fadeSpeed,j=i.css(b.position),h=/^\d+%$/.test(j)?parseInt(parseInt(j,10)/100*c.height()):parseInt(j),m=(c.height()+b.min>=d.height())&&!b.backToTop;var e=function(){if(!!window.ActiveXObject&&!window.XMLHttpRequest){i.css({position:"absolute"});if(b.position=="bottom"){i.css({top:c.scrollTop()+c.height()-i.height()-h})}if(b.position=="top"){i.css({top:c.scrollTop()+h})}}if(c.scrollTop()>=b.min||m){i.fadeIn(n);if(typeof(b.onShow)==="function"){b.onShow()}}else{i.fadeOut(n)}};if(b.min==0||m){e()}c.on("scroll.sidebar",function(){e()});if(b.relative){var l=b.relativeWidth,f=i.width(),k=(c.width()+l)/2;i.css("left",k);c.on("resize.sidebar scroll.sidebar",function(){var p=c.width();if(b.overlay){k=(p-f*2>l)?((p+l)/2):(p-f)}else{k=(p+l)/2}i.css("left",k)})}if(b.backToTop){a(b.backContainer).click(function(){g.animate({scrollTop:0},100);return false})}i.find(b.smooth).click(function(p){var q=a(a(this).attr("href"));if(a(this).attr("href").charAt(0)=="#"&&q.length>0){p.preventDefault();g.animate({scrollTop:q.offset().top-b.anchorOffset},100)}})})}})(jQuery);